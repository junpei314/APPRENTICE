# 日報

6/12(水)

## 本日の目標

- 通知日カラムの編集と削除機能を実装
- メール送信機能の実装

## 学習時間

- 8h

## 目標の振り返り

- 通知日カラムの編集と削除機能を実装、メール送信機能の実装をした。


## 学んだこと

- Sidekiqは複数のジョブを並行して非同期で処理することができる。メール送信、定期的なタスクの実行など、時間のかかる作業や非同期で行いたい作業をSidekiqのジョブとして定義し、バックグラウンドで実行する。
- SidekiqはRedisを利用してジョブの管理を行う。ジョブはRedisのキューに保存され、Sidekiqのプロセスがこれを取り出して実行する。
    
    Sidekiqのジョブの定義
    
    ```ruby
    class MyJob
      include Sidekiq::Worker
    
      def perform(args)
        # 長時間かかる作業をここで行う
      end
    end
    ```
    
    ジョブをキューに追加するには任意の場所で以下を実行。**`args`**はジョブの実行時に**`perform`**メソッドに渡す引数。
    
    ```ruby
    MyJob.perform_async(args)  # ジョブを非同期で実行
    MyJob.perform_in(5.minutes, args)  # 5分後にジョブを実行
    MyJob.perform_at(2.hours.from_now, args)  # 2時間後にジョブを実行
    ```
    

## 感想

- 昨日は体調を崩して、ほとんど作業を進められなかった。今後で挽回していく。
- 今までは通知時間をdateカラムとtimeカラムに分けて管理していたが、datetime型のカラム一つで管理した方が効率が良さそうだったので、カラムの追加と削除を行なった。開発が進んでいる段階でカラムを編集すると、いろいろな箇所に影響が出るため、開発前のテーブル定義の重要さが身にしみた。

## 明日の目標

- アカウントの認可の部分を進める
- メールアドレスの管理方法を調べる
- Webhookを使ったTeamsチャットへのリマインド方法を考える
